
# Pytest. Фреймворк для тестирования.

`pytest` - один из самых популярных фреймворков для тестирования на языке Python. Он предоставляет простой и эффективный способ написания тестов, а его богатый набор функций делает процесс тестирования более гибким и удобным. В этой статье мы рассмотрим основы использования pytest и покажем, как создавать и запускать тесты.

## Установка и настройка

Первым шагом является установка pytest. Откройте ваш терминал и выполните следующую команду:

```
pip install pytest
```

После установки мы можем приступить к написанию тестов.

## Создание тестов

Создайте новую директорию для вашего проекта тестирования и перейдите в нее.
Создайте файл test_example.py, где example - это имя вашего проекта или модуля, который вы хотите протестировать.

Откройте файл test_example.py в любом редакторе кода и добавьте следующий пример кода:

```python
def add(x, y):
    return x + y

def test_add():
    assert add(2, 3) == 5
```

В этом примере мы определили функцию add, которая складывает два числа. Затем мы определили тестовую функцию test_add, в которой мы используем утверждение assert, чтобы проверить, что результат вызова функции add(2, 3) равен 5.

## Запуск тестов

Откройте терминал в корневой директории вашего проекта тестирования.
Запустите следующую команду:

```python
pytest
```

pytest автоматически обнаружит и запустит все файлы с тестами в текущей директории и ее поддиректориях. В нашем случае он найдет файл test_example.py и выполнит тестовую функцию test_add. Если все тесты пройдут успешно, вы увидите соответствующий вывод в терминале.

В качестве демонстрации создадим проект со следующей структурой:

```
project/
├── my_module.py
└── tests/
    └── test_my_module.py
```

где:

- `project/`: Главная директория проекта.

- `my_module.py`: Файл с определением функции multiply:

    ```python
    def multiply(x, y):
        return x * y
    ```
    
- `tests/`: Директория с тестами.

- `test_my_module.py`: Файл с тестовыми функциями для функции multiply:

    ```python
    import pytest
    from my_module import multiply

    def test_multiply():
        assert multiply(2, 3) == 6
        assert multiply(5, 10) == 50
        assert multiply(-4, 8) == -32

    def test_multiply_with_zero():
        assert multiply(0, 10) == 0
        assert multiply(5, 0) == 0
        assert multiply(0, 0) == 0

    def test_multiply_with_negative_numbers():
        assert multiply(-2, -3) == 6
        assert multiply(-5, 10) == -50
        assert multiply(-4, -8) == 32

    def test_multiply_with_float_numbers():
        assert multiply(2.5, 4) == 10.0
        assert multiply(3, 1.5) == 4.5
        assert multiply(0.5, 0.5) == 0.25
    ```

Запустить тестирование можно находясь в корневоей директории при помощи команды `pytest`.



## Дополнительные возможности pytest

pytest предоставляет множество дополнительных возможностей для более продвинутого тестирования. Вот несколько примеров:

- Фикстуры: pytest поддерживает использование фикстур, которые позволяют настроить состояние тестового окружения и предоставить общие ресурсы для нескольких тестовых функций.

- Параметризация тестов: вы можете параметризовать тестовые функции, чтобы выполнить их с различными наборами входных данных.

- Маркировка тестов: вы можете маркировать тесты с помощью аннотаций, чтобы запускать только определенные тесты или группы тестов.

- Генерация отчетов: pytest предоставляет различные плагины для генерации отчетов о результатах тестирования, включая HTML-отчеты, JUnit-отчеты и многое другое.
