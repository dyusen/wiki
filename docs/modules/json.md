# Работа с json-файлами в Python

## Что такое json?

JSON - это в первую очередь формат хранения структурированных текстовых данных. Его название является аббревиатурой - **JavaScript Object Notation**. Несмотря на свое название этот формат не имеет строгой привязки к JavaScript и может использоваться практически в любом языке программирования. Связь с JS обуславливается тем, что синтаксис формата был вдохновлен структурой объектов в JS. Пример JSON файла:

```json
{
  "name": "John Doe",
  "age": 30,
  "city": "New York"
}
```

Благодаря "монополии" на фронтенде языка JS и легкочитаемой структуре этот формат стал популярным для обмена данными между клиентскими и серверными частями приложений. Иначе говоря: умение читать джейсоны - обязанность каждого разработчика.

## json и словари Python

Начнем с того, что формат json очень напоминает словари в Python. Также можно вспомнить следующее:

- **Object Notation** указывает на то, что JSON использует нотацию, которая апоминает синтаксис объектов в языке программирования JavaScript

- Объектно-ориентированная модель языка Python использует словари для хранения полей и методов (вспомните про `__dict__`).

Несмотря на поразительное сходство, есть и отличия, обусловленные особенностями языков этих двух язков:

- `null` в json:

  ```json
  {
  "name": "John Doe",
  "age": 30,
  "city": null
  }
  ```

  `None` в словаре Python:

  ```python
  data = {
  "name": "John Doe",
  "age": 30,
  "city": None
  }
  ```

- `true` и `false` в json:

  ```json
  {
  "name": "John Doe",
  "isStudent": true,
  "hasCar": false
  }
  ```

  `True` и `False` в словаре Python:

  ```python
  data = {
  "name": "John Doe",
  "is_student": True,
  "has_сar": False
  }
  ```

> Также стоит обратить внимание на то, что  в json используются строго двойные кавычки для обрамления строк и camelCase стиль названий полей.

## JSON в Python

В Python существует встроенный модуль json, который позволяет работать с данными в формате JSON.

Начнем с преобразования словаря в json. У нас есть возможность сохранить json в отдельный файл, а также получить обычную строку, содержащую json:

```python
import json

# Данные Python
data = {
    "name": "John Doe",
    "age": 30,
    "city": "New York"
}

# Сериализация данных в JSON и сохранение в файл
with open('output.json', 'w') as file:
    json.dump(data, file)

# Сериализация данных в JSON строку
json_string = json.dumps(data)
print(json_string)
```

> Выше использовался термин "сериализация". Сериализация в программирование это процесс преобразования объекта или структуры данных в обычный текстовый формат, который может быть сохранен на устройстве в виде текстового файла или отправлен по сети.

---

Для загрузки json из файла используется метод ```json.load()```:

```python
import json

# Загрузка данных из файла JSON
with open('data.json') as file:
    data = json.load(file)

# Вывод данных
print(data)
```

В этом примере мы используем функцию json.load(), которая загружает данные JSON из файла и преобразует их в структуры данных Python. Результат сохраняется в переменной data, и мы можем работать с данными как с обычным словарем или списком в Python.

---

После загрузки данных JSON в Python или сериализации Python в JSON, мы можем работать с этими данными как с обычными структурами данных Python, такими как словари и списки. Например, мы можем получить доступ к значениям по ключу или индексу, добавлять или удалять элементы и т.д.:

```python
import json

# Загрузка данных JSON
with open('data.json') as file:
    data = json.load(file)

# Получение значения по ключу
name = data['name']
print(name)

# Изменение значения
data['age'] = 31

# Добавление нового ключа и значения
data['country'] = 'USA'

# Удаление ключа
del data['city']

# Сериализация данных в JSON строку
json_string = json.dumps(data)
print(json_string)
```

## Задание для практики

1. Создайте JSON файл tasks.json, который будет представлять базу данных для управления списком задач. JSON файл должен содержать следующую структуру:

```json
{
  "tasks": [
    {
      "id": 1,
      "title": "Task 1",
      "description": "Do something",
      "completed": false
    },
    {
      "id": 2,
      "title": "Task 2",
      "description": "Do something else",
      "completed": true
    },
    ...
  ]
}
```

2. Напишите программу на Python, которая будет выполнять следующие функции:

    - Загрузка данных из файла tasks.json и представление их в виде списка задач.
    
    - Вывод списка задач на экран в удобочитаемом формате.
    
    - Добавление новой задачи в список с автоматическим присвоением уникального идентификатора.

    - Отметка задачи как выполненной (изменение статуса completed).

    - Удаление задачи по идентификатору.

    - Сохранение обновленного списка задач в файл tasks.json.

3. Предусмотрите обработку возможных ошибок, таких как отсутствие файла tasks.json или некорректные операции пользователя.

4. Расширьте программу, добавив дополнительные функции:

    - Поиск задачи по идентификатору и вывод ее деталей.
    
    - Фильтрация задач по статусу выполнения (вывод только невыполненных или выполненных задач).
    
    - Сортировка задач по различным критериям, например, по идентификатору или статусу выполнения.

5. Оформите код программы в виде функций и классов для повторного использования и улучшения читаемости кода.

6. Напишите тесты для основных функций программы, чтобы убедиться в их правильном функционировании.