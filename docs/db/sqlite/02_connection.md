
# Подключение к БД в Python приложении

## Подключение к базе на жестком диске

Работа с базами данных SQLite происходит через стандартный модуль `sqlite3`. Рассмотрим скрипт, который подключается к базе данных и создает в ней таблицу:

```python
from sqlite3 import connect

with connect('database.db') as connection:
    cur = connection.cursor()
    cur.execute('''CREATE TABLE "users" (
    "name"  TEXT,
    "age"   INTEGER,
    "city"  TEXT
);
''')
```

Разберемся, что делает данный скрипт:

- `from sqlite3 import connect` - имортируем функцию `connect()`. Она устанавливает соединение с базой данных.

- `with connect('database.db') as connection:` - создаем объект подключения при помощи функции `connect()`. В качестве аргумента передается путь к файлу с базой данных. Если по указанному пути база данных отсутствует, то создастся новая.

- `cur = connection.cursor()` - создаем объект курсора. Курсор позволяет выполнять запросы.

- `cur.execute()` - выполняем запрос, описанный в предыдущей статье. Фактически, произойдет создание таблицы "users" внутри базы данных

В предыдущем примере подключение совершается через конструкцию `with`, что позволяет после окончания работы с базой данных закрыть соединение. Если соединение открывается без использования `with`, то закрывать его следует через метод `close()`:

```python
from sqlite3 import connect

connection = connect('database.db')
cur = connection.cursor()

cur.execute('''CREATE TABLE "users" (
"name"  TEXT,
"age"   INTEGER,
"city"  TEXT
);''')

connection.close()
```

> Если файл базы данных заблокирован другим процессом, то подключение к нему может завершиться неудачно. Например, не следует вносить изменения через приложение DB Browser и параллельно пробовать подключаться через Python скрипт

## Подключение к базе в ОЗУ

SQLite позволяет создавать базы данных в оперативной памяти, что может быть полезным в некоторых случаях, например, если нужно быстро обработать большой объем данных или если не требуется сохранять данные после завершения работы программы.

Для создания базы данных в оперативной памяти в SQLite нужно указать специальный путь к файлу базы данных, начинающийся с двоеточия. Например, следующий код создает пустую базу данных в оперативной памяти:

```python
import sqlite3

conn = sqlite3.connect(':memory:')
```

После выполнения этого кода переменная conn будет содержать объект соединения с базой данных, созданной в оперативной памяти.

Как и в случае с обычными базами данных, с базами данных в оперативной памяти можно работать с помощью курсоров и выполнять SQL-запросы. При завершении работы с базой данных в оперативной памяти также необходимо закрыть соединение с помощью метода `close()` объекта соединения.