
# Коллекции в Python

## Что такое коллекции?

Коллекция в Python — программный объект (переменная-контейнер), хранящая набор значений одного или различных типов, позволяющий обращаться к этим значениям, а также применять специальные функции и методы, зависящие от типа коллекции. 

Частая проблема при изучении коллекций заключается в том, что разобрав каждый тип довольно детально, обычно потом не уделяется достаточного внимания разъяснению картины в целом, не проводятся чёткие сходства и различия между типами, не показывается как одну и туже задачу решать для каждой из коллекций в сравнении. 

## Классификация коллекций

![collections](/assets/collections(1).png)

Пояснения терминологии:

- **Индексированность** – каждый элемент коллекции имеет свой порядковый номер — индекс. Это позволяет обращаться к элементу по его порядковому индексу, проводить слайсинг («нарезку») — брать часть коллекции выбирая исходя из их индекса.

- **Уникальность** – каждый элемент коллекции может встречаться в ней только один раз. Это порождает требование неизменности используемых типов данных для каждого элемента, например, таким элементом не может быть список. 

- **Изменяемость** коллекции — позволяет добавлять в коллекцию новые элементы или удалять их после создания коллекции.

Примечения для словаря:

- сам словарь изменяем — можно добавлять/удалять новые пары ключ: значение;

- значения элементов словаря — изменяемые и не уникальные;

- ключи — не изменяемые и уникальные, поэтому, например, мы не можем сделать ключом словаря список, но можем кортеж. Из уникальности ключей, так же следует уникальность элементов словаря — пар ключ: значение.

> Для того, чтобы объект мог быть ключом словаря, он должен быть хешируем. У кортежа, возможен случай, когда его элемент является не хешируемым объектом, и соответственно сам кортеж тогда тоже не является хешируемым и не может выступать ключом словаря.

```Python
a = (1, [2, 3], 4)
print(type(a))   # <type 'tuple'>
b = {a: 1}       # TypeError: unhashable type: 'list'
```

## Общие подходы к работе с коллекциями



Печать элементов коллекции с помощью функции ```print()```:

```Python
my_list = ['a', 'b', 'c', 'd', 'e', 'f']
my_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5, 'f': 6}

print(my_list)   # ['a', 'b', 'c', 'd', 'e', 'f']
print(my_dict)   # {'a': 1, 'c': 3, 'e': 5, 'f': 6, 'b': 2, 'd': 4}
```

---

Подсчет количества элементов в коллекции при помощи функции ```len()```


```Python
my_list = ['a', 'b', 'c', 'd', 'e', 'f']
my_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5, 'f': 6}

print(len(my_list)) # 6
print(len(my_dict)) # 6 - для словаря пара ключ-значение считаются одним элементом. 
print(len('ab c')) # 4 - для строки элементом является 1 символ
```

---

## Оператор ```in```

Разберем проверку принадлежности элемента данной коллекции c помощью оператора ```in```

> ```x in s``` — вернет ```True```, если элемент входит в коллекцию ```s``` и ```False``` — если не входит. Есть и вариант проверки не принадлежности: ```x not in s```, где есть по сути, просто добавляется отрицание перед булевым значением предыдущего выражения.

```Python
my_list = ['a', 'b', 'c', 'd', 'e', 'f']

print('a' in my_list)           # True
print('q' in my_list)           # False
print('a' not in my_list)       # False
print('q' not in my_list)       # True
```

---

Для **словаря** возможны варианты, понятные из кода ниже:

```Python
my_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5, 'f': 6}
print('a' in my_dict)               # True - без указания метода поиск по ключам
print('a' in my_dict.keys())        # True - аналогично примеру выше
print('a' in my_dict.values())      # False - так как 'а' — ключ, не значение
print(1 in my_dict.values())        # True
```

---

Искать пары *ключ:значение* можно при помощи данного способа:

```Python
my_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5, 'f': 6}

print(('a',1) in my_dict.items())   # True
print(('a',2) in my_dict.items())   # False
```

---

Для строки можно искать не только один символ, но и подстроку:

```Python
print('ab' in 'abc')    # True
```

---

## Обход всех элементов коллекции в цикле ```for```

В данном случае, в цикле будут последовательно перебираться элементы коллекции, пока не будут перебраны все из них:


```Python
colors = ['Red', 'Green', 'Blue', 'Black', 'White']

for color in colors:
    print(color)
```

> Порядок обработки элементов для не индексированных коллекций будет не тот, как при их создании

---

У прохода в цикле по словарю есть свои особенности:

```Python
my_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5, 'f': 6}

for elm in my_dict:
    # При таком обходе словаря, перебираются только ключи
    # равносильно for elm in my_dict.keys()
    print(elm)

for elm in my_dict.values():
    # При желании можно пройти только по значениям
    print(elm)

for key, value in my_dict.items():
	# Проход по .items() возвращает кортеж (ключ, значение), 
	# который присваивается кортежу переменных key, value
	print(key, value)
```

---

> Не меняйте количество элементов коллекции в теле цикла во время итерации по этой же коллекции! — Это порождает не всегда очевидные на первый взгляд ошибки.

Чтобы этого избежать подобных побочных эффектов, можно, например, итерировать копию коллекции:

```Python
for elm in list(my_list):
    # Теперь можете удалять и добавлять элементы в исходный список my_list,
    # так как итерация идет по его копии.
```

## Функции ```min()```, ``max()``, ```sum()```


- Функции ```min()```, ```max()``` — поиск минимального и максимального элемента соответственно — работают не только для числовых, но и для строковых значений.
- ```sum()``` — суммирование всех элементов, если они все числовые.

```Python
my_list = ['a', 'b', 'c', 'd', 'e', 'f']
my_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5, 'f': 6}

print(min(my_list))               # a
print(sum(my_dict.values()))      # 21
```

> Подробнее о сравнениях строк - ссылка