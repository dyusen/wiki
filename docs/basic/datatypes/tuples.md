
# Кортежи в Python. Tuple

## Создание кортежа. Отличия кортежей от списков

Кортежи (tuple) – это те же списки за одним исключением. Кортежи неизменяемые структуры данных. Иначе говоря, данные в них можно добавить только при создании, а изменить или удалить элемент из него невозможно.

Так же как списки они могут состоять из элементов разных типов, перечисленных через запятую. Кортежи заключаются в круглые, а не квадратные скобки.

```Python
tuple1 = (1, 2, 3) #создание с использованием круглых скобок
tuple2 = tuple(4, 5, 6) #создание с помощиью функции-конструктора
```

Чтобы создать кортеж из одного элемента при помощи круглых скобок, нужно после единственного элемента поставить запятую:

```Python
tuple1 = ('string',) #верно
tuple2 = ('string') #неверно

print(type(tuple1)) #кортеж
print(type(tuple2)) #строка
```

Первое преимущество кортежей - они занимают меньше места в памяти, чем списки. Проверим это с помощью метода ```__sizeof__()```, который возвращает размер объекта в байтах.

```Python
a = (1, 2, 3)
b = [1, 2, 3]

print(a.__sizeof__())
print(b.__sizeof__())
```

Второе преимущество - неизменяемость. Помимо очевидной "защиты от дурака", которая помешает по неосторожности поменять важное значение в кортеже, неизменяемость бывает очень полезной. Рассмотрим на следующем примере:

В Python изменяемые объекты передаются в функцию по ссылке. Это значит, что не создается копия объекта, а переменной-параметру присваивается ссылка на уже существующий объект. В итоге, если в теле функции объект изменяется, то эти изменения касаются глобального объекта.

```Python
def add_num(seq, num):
    for i in range(len(seq)):
        seq[i] += num
    return seq
 
origin = [3, 6, 2, 6]
changed = add_num(origin, 3)
 
print(origin)
print(changed)
```

Данная программа неправильная. Хотя никаких выбросов исключений не произойдет, она содержит логическую ошибку. На выводе получаем:

```Python
[6, 9, 5, 9]
[6, 9, 5, 9]
```

То есть исходный список был также изменен. Параметр seq содержал ссылку не на свой локальный список, а на список-оригинал. Таким образом, в операторе return здесь нет смыла. Если функция замысливалась как изменяющая глобальный список, то программа должна выглядеть так:

```Python
def add_num(seq, num):
    for i in range(len(seq)):
        seq[i] += num
 
origin = [3, 6, 2, 6]
add_num(origin, 3)
print(origin)
```

Что делать, если все же требуется не изменять исходный список, а сформировать по нему новый? Задачу можно решить несколькими способами. Во первых, в функции можно создать локальный список, после чего возвращать его:

```Python
def add_num(seq, num):
    new_seq = []
    for i in seq:
        new_seq.append(i + num)
    return new_seq
 
origin = [3, 6, 2, 6]
changed = add_num(origin, 3)
 
print(origin)
print(changed)
```

Результат:

```Python
[3, 6, 2, 6]
[6, 9, 5, 9]
```

Исходный список в функции не меняется. Его элементы лишь перебираются.

Второй способ защитить список-оригинал – использовать кортеж. Этот способ более надежный, так как в больших программах трудно отследить, что ни одна функция не содержит команд изменения глобальных данных.

Хотя преобразовывать к кортежу можно как при передаче в функцию, так и в самой функции, лучше сразу делать глобальный список кортежем. Поскольку неизменяемые объекты передаются по значению, а не по ссылке, то в функцию будет поступать копия структуры, а не оригинал. Даже если туда передается оригинал, изменить его невозможно. Можно лишь, как вариант, скопировать его и/или изменить тип, создав тем самым локальную структуру, и делать с ней все, что заблагорассудится.

```Python
def add_num(seq, num):
    seq = list(seq)
    for i in range(len(seq)):
        seq[i] += num
    return seq
 
origin = (3, 6, 2, 6)
changed = add_num(origin, 3)
 
print(origin)
print(changed)
```

## Списки в кортежах

Кортежи могут содержать списки, также как списки быть вложенными в другие списки.

```Python
nested_tuple = (1, "do", ["param", 10, 20])
```

Возникает вопрос - можем ли мы изменить список внутри кортежа? Списки - изменяемый тип данных, и если обратиться к одному из элементов этого списка, то мы действительно можем изменить его значение:

```Python
nested_tuple = (1, "do", ["param", 10, 20])
nested_tuple[2][1] = 15
```

На самом деле кортеж остается неизменяемым. Просто в нем содержится не сам список, а ссылка на него. Ее изменить нельзя. Но менять сам список можно.
